var base = location.protocol + '//' + location.host;

$(document).ready(function () {
    
    $('.delete').on("click", function (e) {
        e.preventDefault();

        var $button = $(this);

    Swal.fire({
        title: "Warning",
        text: "Sure you want to delete",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: "Yes",
      }).then((result) => {
        if (result.isConfirmed) {

        window.location.href = $button.attr("href");

        }
      });

    });

    $('.add-to-cart').on("submit", function (e) {
        e.preventDefault();

        var $form = $(this);
        var $button = $form.find("[type='submit']");

        $.ajax({

            url: $form.attr("action"),
            method: $form.attr("method"),
            data: $form.serialize(),
            dataType: "JSON",
            beforeSend: function () {
                $button.html('<div class="preloader-wrapper small active" style="zoom: 70%; margin-top: 10px;"><div class="spinner-layer spinner-blue-only" style="border-color: white;"><div class="circle-clipper left" ><div class="circle"></div></div><div class="gap-patch" ><div class="circle" ></div></div><div class="circle-clipper right" ><div class="circle"></div></div></div></div>');
            },
            success: function (data) {
                $button.html('<i class="mdi-action-done"></i>');
                $(".carrito-red").html(data.products_count);
                Materialize.toast('<i class="'+data.icon+'" style="margin-right: 5px;"></i> <h6 class="'+data.type+'">'+data.message+'</h6>', 4000);
                setTimeout(() => {
                    rb($button);
                }, 1000);
            },
            error: function (err) {
                $button.html('<i class="mdi-alert-error"></i>');
                Materialize.toast('<i class="mdi-alert-error red-text" style="margin-right: 5px;"></i> <h6 class="red-text">Upss, Algo salio mal...</h6>', 4000);
                setTimeout(() => {
                    rb($button);
                }, 1000);
            }

        });
        return false;
    });

    function rb($button) {
        $button.html('<i class="mdi-action-shopping-cart"></i>');
    }


});

function setClipboardCard(){
    var id = "referir";
    var existsTextarea = document.getElementById(id);

    existsTextarea.select();
    
    document.execCommand('copy');

    Materialize.toast('<i class="mdi-content-content-copy green-text" style="margin-right: 5px;"></i> <h6 class="green-text">Enlace Copiado</h6>', 4000);

}

// function alerta(meessage, tipo) {
    
   
// }